sequenceDiagram
    participant CS as Charging Station (OCTT)
    participant CSMS as CSMS (System Under Test)

    Note over CS,CSMS: Test Case: TC_J_02_CSMS
    Note over CS,CSMS: Clock-aligned Meter Values - Transaction ongoing
    Note over CS,CSMS: Use case: J01 | Requirement: J01.FR.18
    Note over CS,CSMS: Before: Reusable State EnergyTransferStarted

    loop Repeated every configured clock-aligned interval for evseId=0 and idle EVSEs
        CS->>CSMS: MeterValuesRequest
        Note right of CS: sampledValue.context = Sample.Clock

        CSMS-->>CS: MeterValuesResponse

        CS->>CSMS: NotifyEventRequest
        Note right of CS: trigger = Periodic<br/>component.name = FiscalMetering

        CSMS-->>CS: NotifyEventResponse
    end

    loop Repeated every configured clock-aligned interval until configured transaction duration reached
        CS->>CSMS: TransactionEventRequest
        Note right of CS: triggerReason = MeterValueClock<br/>eventType = Updated<br/>evse.id = configured evseId<br/>sampledValue.context = Sample.Clock

        CSMS-->>CS: TransactionEventResponse
    end

    Note over CS,CSMS: Test ends after configured transaction duration

sequenceDiagram
    participant CS as Charging Station (OCTT)
    participant CSMS as CSMS (System Under Test)

    Note over CS,CSMS: Test Case: TC_I_01_CSMS
    Note over CS,CSMS: Show EV Driver running total cost during charging - costUpdatedRequest

    CS->>CSMS: AuthorizeRequest [idToken.idToken=<valid>, idToken.type=<valid>]
    CSMS-->>CS: AuthorizeResponse [idTokenInfo.status=Accepted]

    CS->>CSMS: TransactionEventRequest [eventType=Updated, triggerReason=Authorized]
    CSMS-->>CS: TransactionEventResponse [idTokenInfo.status=Accepted]

    Note over CS,CSMS: [Reusable State: EVConnectedPreSession]
    CS->>CSMS: StatusNotificationRequest [connectorStatus=Occupied]
    CSMS-->>CS: StatusNotificationResponse
    CS->>CSMS: NotifyEventRequest [trigger=Delta, actualValue=Occupied]
    CSMS-->>CS: NotifyEventResponse
    CS->>CSMS: TransactionEventRequest [eventType=Updated, triggerReason=CablePluggedIn, chargingState=EVConnected]
    CSMS-->>CS: TransactionEventResponse

    Note over CS,CSMS: [Reusable State: EnergyTransferStarted]
    CS->>CSMS: TransactionEventRequest [eventType=Updated, triggerReason=ChargingStateChanged, chargingState=Charging]
    CSMS-->>CS: TransactionEventResponse

    loop Repeated every sampled interval (2 iterations)
        CS->>CSMS: TransactionEventRequest [eventType=Updated, triggerReason=MeterValuePeriodic, sampledValue.context=Sample.Periodic]
        CSMS-->>CS: TransactionEventResponse [totalCost optional]

        alt If no totalCost in TransactionEventResponse
            CSMS->>CS: CostUpdatedRequest [totalCost, transactionId]
            CS-->>CSMS: CostUpdatedResponse
        end
    end
